<?php

/**
 * @file
 * Dpl_react_app drupal module file.
 *
 * Is providing theme variables
 * in order to integrate the DPL react apps in the site
 * and various other tasks eg. providing rides and controllers for rendering.
 */

use Drupal\Core\GeneratedUrl;
use Drupal\Core\Url;
use Drupal\dpl_fees\DplFeesSettings;
use Drupal\dpl_library_agency\Form\GeneralSettingsForm;
use Drupal\dpl_react_apps\Controller\DplReactAppsController;
use Drupal\dpl_recommender\DplRecommenderSettings;
use function Safe\json_encode;

/**
 * Implements template_preprocess_page().
 *
 * @param mixed[] $variables
 *   Theme variables.
 */
function dpl_react_apps_preprocess_page(array &$variables): void {
  $variables['search'] = [
    'header' => [
      '#theme' => 'dpl_react_app',
      '#name' => 'search-header',
      '#data' => [
      // Add external API base urls.
      ] + DplReactAppsController::externalApiBaseUrls(),
    ],
  ];
}

/**
 * Texts for all apps.
 *
 * @return mixed[]
 *   Texts props.
 */
function dpl_react_apps_texts(): array {
  $feesConfig = \Drupal::configFactory()->get('dpl_fees.settings');
  $recommenderSettings = \Drupal::configFactory()->get('dpl_recommender.settings');
  // These texts are given to all the apps.
  // Instead of defining them for each app separately we define them here in
  // case they are reused in multiple apps and we overlook it.
  return [
    // Advanced search.
    'advanced-search-ac-source' => t('source', [], ['context' => 'advanced search']),
    'advanced-search-add-row' => t('add row', [], ['context' => 'advanced search']),
    'advanced-search-all-indexes' => t('all indexes', [], ['context' => 'advanced search']),
    'advanced-search-audience' => t('audience', [], ['context' => 'advanced search']),
    'advanced-search-copy-string' => t('copy string', [], ['context' => 'advanced search']),
    'advanced-search-creator' => t('creator', [], ['context' => 'advanced search']),
    'advanced-search-date-first-edition' => t('edition', [], ['context' => 'advanced search']),
    'advanced-search-date' => t('date', [], ['context' => 'advanced search']),
    'advanced-search-decimal-dk5' => t('dk5', [], ['context' => 'advanced search']),
    'advanced-search-edit-cql' => t('edit cql', [], ['context' => 'advanced search']),
    'advanced-search-filter-access' => t('accessibility', [], ['context' => 'advanced search']),
    'advanced-search-filter-all' => t('All', [], ['context' => 'advanced search']),
    'advanced-search-filter-article' => t('article', [], ['context' => 'advanced search']),
    'advanced-search-filter-audio-book' => t('audio book', [], ['context' => 'advanced search']),
    'advanced-search-filter-book' => t('book', [], ['context' => 'advanced search']),
    'advanced-search-filter-ebook' => t('ebook', [], ['context' => 'advanced search']),
    'advanced-search-filter-fiction' => t('fiction', [], ['context' => 'advanced search']),
    'advanced-search-filter-literature-form' => t('literature form', [], ['context' => 'advanced search']),
    'advanced-search-filter-material-type' => t('material type', [], ['context' => 'advanced search']),
    'advanced-search-filter-movie' => t('movie', [], ['context' => 'advanced search']),
    'advanced-search-filter-music' => t('music', [], ['context' => 'advanced search']),
    'advanced-search-filter-non-fiction' => t('Non-fiction', [], ['context' => 'advanced search']),
    'advanced-search-filter-online' => t('online', [], ['context' => 'advanced search']),
    'advanced-search-filter-physical' => t('physical', [], ['context' => 'advanced search']),
    'advanced-search-genre' => t('genre', [], ['context' => 'advanced search']),
    'advanced-search-identifier' => t('identifier', [], ['context' => 'advanced search']),
    'advanced-search-input-placeholder' => t('search term', [], ['context' => 'advanced search']),
    'advanced-search-language' => t('language', [], ['context' => 'advanced search']),
    'advanced-search-link-to-this-search' => t('link to this search', [], ['context' => 'advanced search']),
    'advanced-search-main-creator' => t('main creator', [], ['context' => 'advanced search']),
    'advanced-search-main-title' => t('main title', [], ['context' => 'advanced search']),
    'advanced-search-preview-empty' => t('-', [], ['context' => 'advanced search']),
    'advanced-search-preview-headline' => t('CQL search string', [], ['context' => 'advanced search']),
    'advanced-search-publisher' => t('publisher', [], ['context' => 'advanced search']),
    'advanced-search-reset' => t('reset', [], ['context' => 'advanced search']),
    'advanced-search-search-button' => t('search', [], ['context' => 'advanced search']),
    'advanced-search-source' => t('source', [], ['context' => 'advanced search']),
    'advanced-search-subject' => t('subject', [], ['context' => 'advanced search']),
    'advanced-search-title' => t('advanced search', [], ['context' => 'advanced search']),
    'advanced-search-type' => t('type', [], ['context' => 'advanced search']),
    'alert-error-close' => t('close', [], ['context' => 'advanced search']),
    'alert-error-message' => t('an error occurred', [], ['context' => 'advanced search']),
    'clause-and' => t('and', [], ['context' => 'advanced search']),
    'clause-not' => t('not', [], ['context' => 'advanced search']),
    'clause-or' => t('or', [], ['context' => 'advanced search']),
    'copied-link-to-this-search' => t('Link copied to clipboard', [], ['context' => 'advanced search']),
    'copied-to-clipboard' => t('Copied', [], ['context' => 'advanced search']),
    'cql-search-title' => t('CQL search', [], ['context' => 'advanced search']),
    'loading-results' => t('Loading results...', [], ['context' => 'advanced search']),
    'showing-materials' => t('showing materials', [], ['context' => 'advanced search']),
    'to-advanced-search-button' => t('Back to advanced search', [], ['context' => 'advanced search']),

    // Blocked patron.
    'blocked-patron-close-modal-aria-label' => t('Close blocked patron modal', [], ['context' => 'Blocked user (Aria)']),
    'blocked-patron-d-body' => t('Blocked patron body text (d)', [], ['context' => 'Blocked user']),
    'blocked-patron-d-title' => t('Blocked patron title text (d)', [], ['context' => 'Blocked user']),
    'blocked-patron-e-body' => t('You are therefore not able to borrow or reserve materials from the library', [], ['context' => 'Blocked user']),
    'blocked-patron-e-link' => t('Pay your fees here', [], ['context' => 'Blocked user']),
    'blocked-patron-e-title' => t('You have exceeded your fee limit', [], ['context' => 'Blocked user']),
    'blocked-patron-f-body' => t('Blocked patron body text (f)', [], ['context' => 'Blocked user']),
    'blocked-patron-f-title' => t('Blocked patron title text (f)', [], ['context' => 'Blocked user']),
    'blocked-patron-modal-aria-description' => t('This modal alerts you, that your patron has been blocked', [], ['context' => 'Blocked user (Aria)']),
    'blocked-patron-o-body' => t('Blocked patron body text (o)', [], ['context' => 'Blocked user']),
    'blocked-patron-o-title' => t('Blocked reason modal title (o)', [], ['context' => 'Blocked user']),
    'blocked-patron-s-body' => t('Blocked patron body text (s)', [], ['context' => 'Blocked user']),
    'blocked-patron-s-title' => t('Blocked patron title text (s)', [], ['context' => 'Blocked user']),
    'blocked-patron-u-body' => t('You therefore cannot reserve, borrow or renew loans. Please contact the library for further information (u)', [], ['context' => 'Blocked user']),
    'blocked-patron-u-title' => t('Your user is blocked (u)', [], ['context' => 'Blocked user']),
    'blocked-patron-w-body' => t('You therefore cannot reserve, borrow or renew loans. Please contact the library for further information (w)', [], ['context' => 'Blocked user']),
    'blocked-patron-w-title' => t('Your user is blocked (w)', [], ['context' => 'Blocked user']),

    // Dashboard.
    'choose-all' => t('Select all', [], ['context' => 'Dashboard']),
    'digital' => t('Digital', [], ['context' => 'Dashboard']),
    'fees' => t('Fees', [], ['context' => 'Dashboard']),
    'group-modal-aria-description' => t('This modal makes it possible to renew materials', [], ['context' => 'Dashboard (Aria)']),
    'intermediate' => t('Intermediates', [], ['context' => 'Dashboard']),
    'list-details-nothing-selected-label' => t('Pick', [], ['context' => 'Dashboard']),
    'loans-not-overdue' => t('Longer return time', [], ['context' => 'Dashboard']),
    'no-physical-loans' => t('At the moment, you have 0 physical loans', [], ['context' => 'Dashboard']),
    'no-reservations' => t('At the moment, you have 0 reservations', [], ['context' => 'Dashboard']),
    'pay-owed' => t('Pay', [], ['context' => 'Dashboard']),
    'physical-loans' => t('Loans', [], ['context' => 'Dashboard']),
    'queued-reservations' => t('Queued reservations', [], ['context' => 'Dashboard']),
    'reservations-still-in-queue-for' => t('Still in queue', [], ['context' => 'Dashboard']),
    'reservations' => t('Reservations', [], ['context' => 'Dashboard']),
    'total-amount-fee' => t('@total,-', [], ['context' => 'Dashboard']),
    'total-owed' => t('You owe in total', [], ['context' => 'Dashboard']),
    'your-profile' => t('Your profile', [], ['context' => 'Dashboard']),

    // Favorites list.
    "favorites-list-empty" => t("Your favorites list is empty", [], ['context' => 'Favorites list']),
    "favorites-list-header" => t("Favorites", [], ['context' => 'Favorites list']),
    "favorites-list-materials" => t("@count materials", [], ['context' => 'Favorites list']),

    // Favorites list material component.
    'favorites-list-material-component-go-to-list' => t("Go to My list", [], ['context' => 'Favorites list material component']),
    'favorites-list-material-component-title' => t("Your list", [], ['context' => 'Favorites list material component']),

    // Fees list.
    'already-paid' => t("Please note that paid fees are not registered up until 72 hours after your payment after which your debt is updated and your user unblocked if it has been blocked.", [], ['context' => 'Fees list']),
    'empty-fee-list' => t("You have 0 unpaid fees or replacement costs", [], ['context' => 'Fees list']),
    'fee-created' => t("Fees charged @date", [], ['context' => 'Fees list']),
    'fee-details-modal-close-modal-aria-label' => t("Close fee details modal", [], ['context' => 'Fees list (Aria)']),
    'fee-details-modal-description' => t("Modal containing information about this element or group of elements fees", [], ['context' => 'Fees list']),
    'fee-details-modal-screen-reader' => t("A modal containing details about a fee", [], ['context' => 'Fees list']),
    'fee-list-body' => $feesConfig->get('fee_list_body_text') ?? DplFeesSettings::FEE_LIST_BODY_TEXT,
    'fee-list-days' => t("Days", [], ['context' => 'Fees list']),
    'fee-list-headline' => t("Fees & replacement costs", [], ['context' => 'Fees list']),
    'fee-payment-modal-body' => t("You will be redirected to Mit Betalingsoverblik.", [], ['context' => 'Fees list']),
    'fee-payment-modal-cancel' => t("Cancel", [], ['context' => 'Fees list']),
    'fee-payment-modal-goto' => t("Go to Mit Betalingsoverblik", [], ['context' => 'Fees list']),
    'fee-payment-modal-header' => t("Unpaid fees post 27/10 2020", [], ['context' => 'Fees list']),
    'fee-payment-modal-notice' => t("Paid fees can take up to 24 hours to registrer.", [], ['context' => 'Fees list']),
    'i-accept' => t("I accept the", [], ['context' => 'Fees list']),
    'item-fee-amount' => t("Fee @fee,-", [], ['context' => 'Fees list']),
    'other-materials' => t("Other materials", [], ['context' => 'Fees list']),
    'pay' => t("Pay", [], ['context' => 'Fees list']),
    'plus-x-other-materials' => t("+ @amount other materials", [], ['context' => 'Fees list']),
    'post-payment-type-change-date' => t("AFTER 27/10 2020", [], ['context' => 'Fees list']),
    'pre-payment-type-change-date' => t("BEFORE 27/10 2020", [], ['context' => 'Fees list']),
    'terms-of-trade' => $feesConfig->get('terms_of_trade_text') ?? DplFeesSettings::TERMS_OF_TRADE_TEXT,
    'total-fee-amount' => t("Fee", [], ['context' => 'Fees list']),
    'total' => t("Total", [], ['context' => 'Fees list']),
    'turned-in' => t("Turned in @date", [], ['context' => 'Fees list']),
    'unpaid-fees' => t("Unsettled debt", [], ['context' => 'Fees list']),
    'view-fees-and-compensation-rates' => t("see our fees and replacement costs", [], ['context' => 'Fees list']),

    // Loan list.
    'group-modal-go-to-material-aria-label' => t("Go to @label material details", [], ['context' => 'Loan list (Aria)']),
    'group-modal-header' => t("Renew several", [], ['context' => 'Loan list']),
    'loan-list-additional-materials' => json_encode([
      'type' => 'plural',
      'text' => [
        t('+ 1 other material', [], ['context' => 'Loan list']),
        t('+ @count other materials', [], ['context' => 'Loan list']),
      ],
    ]),
    'loan-list-aria-label-list-button' => t("This button shows all loans in the list", [], ['context' => 'Loan list (Aria)']),
    'loan-list-aria-label-stack-button' => t("This button filters the list, so only one the materials that have the same due date is shown", [], ['context' => 'Loan list (Aria)']),
    'loan-list-digital-loans-empty-list' => t("You have no digital loans at the moment", [], ['context' => 'Loan list']),
    'loan-list-digital-loans-title' => t("Digital loans", [], ['context' => 'Loan list']),
    'loan-list-digital-physical-loans-empty-list' => t("You have 0 loans at the moment", [], ['context' => 'Loan list']),
    'loan-list-due-date-modal-aria-label' => t("This button opens a modal that covers the entire page and contains loans with the same due date as the loan currently in focus", [], ['context' => 'Loan list (Aria)']),
    'loan-list-material-day' => t("day", [], ['context' => 'Loan list']),
    'loan-list-material-days' => t("days", [], ['context' => 'Loan list']),
    'loan-list-material-late-fee' => t("You will be charged a fee, when the item is returned", [], ['context' => 'Loan list']),
    'loan-list-physical-loans-empty-list' => t("You have no physical loans at the moment", [], ['context' => 'Loan list']),
    'loan-list-physical-loans-title' => t("Physical loans", [], ['context' => 'Loan list']),
    'loan-list-renew-multiple-button-explanation' => t("This button opens a modal that covers the entire page and contains loans with different due dates, if some of the loans in the modal are renewable you can renew them", [], ['context' => 'Loan list']),
    'loan-list-renew-multiple-button' => t("Renew several", [], ['context' => 'Loan list']),
    'loan-list-status-badge-danger' => t("Expired", [], ['context' => 'Loan list']),
    'loan-list-status-badge-warning' => t("Expiring soon", [], ['context' => 'Loan list']),
    'loan-list-title' => t("Your loans", [], ['context' => 'Loan list']),
    'loan-list-to-be-delivered-digital-material' => t("Due date digital @date", [], ['context' => 'Loan list']),
    'loan-list-to-be-delivered' => t("Due date physical @date", [], ['context' => 'Loan list']),

    // Patron menu.
    'menu-authenticated-close-button' => t('Close user menu', [], ['context' => 'Patron menu']),
    'menu-authenticated-modal-description' => t('The user modal', [], ['context' => 'Patron menu']),
    'menu-log-out' => t('Log out', [], ['context' => 'Patron menu']),
    'menu-login' => t('Log in', [], ['context' => 'Patron menu']),
    'menu-not-authenticated-close-button' => t('Close user menu', [], ['context' => 'Patron menu']),
    'menu-not-authenticated-modal-description' => t('The user modal, log in or create a user', [], ['context' => 'Patron menu']),
    'menu-notification-loans-expired' => t('loans expired', [], ['context' => 'Patron menu']),
    'menu-notification-loans-expiring-soon' => t('loans expiring soon', [], ['context' => 'Patron menu']),
    'menu-notification-ready-for-pickup' => t('reservations ready for pickup', [], ['context' => 'Patron menu']),
    'menu-notifications-menu-aria-label' => t('Notifications menu', [], ['context' => 'Patron menu (aria)']),
    'menu-profile-links-aria-label' => t('Profile links', [], ['context' => 'Patron menu (aria)']),
    'menu-sign-up' => t('Sign up', [], ['context' => 'Patron menu']),
    'menu-user-icon-aria-label' => t('Open user menu', [], ['context' => 'Patron menu (aria)']),
    'menu-view-your-profile' => t('My Account', [], ['context' => 'Patron menu']),
    'reservations-ready-for-pickup' => t('Reservations ready for pickup', [], ['context' => 'Patron menu']),

    // Patron page.
    'patron-page-basic-details-address-label' => t('Address', [], ['context' => 'Patron page']),
    'patron-page-basic-details-header' => t('BASIC DETAILS', [], ['context' => 'Patron page']),
    'patron-page-basic-details-name-label' => t('Name', [], ['context' => 'Patron page']),
    'patron-page-change-pickup-body' => t('patron page change pickup body text', [], ['context' => 'Patron page']),
    'patron-page-change-pickup-header' => t('RESERVATIONS', [], ['context' => 'Patron page']),
    'patron-page-delete-profile-link' => t('Delete your profile', [], ['context' => 'Patron page']),
    'patron-page-delete-profile' => t('Do you wish to delete your library profile?', [], ['context' => 'Patron page']),
    'patron-page-header' => t('Patron profile page', [], ['context' => 'Patron page']),
    'patron-page-open-pause-reservations-section-aria' => t('This checkbox opens a section where you can put your current reservations on a pause, when the time period picked has ended, the reservations will be resumed', [], ['context' => 'Patron page (aria)']),
    'patron-page-open-pause-reservations-section' => t('Pause your reservations', [], ['context' => 'Patron page']),
    'patron-page-pause-reservations-body' => t('patron page pause reservations body text', [], ['context' => 'Patron page']),
    'patron-page-pause-reservations-header' => t('Pause physical reservations', [], ['context' => 'Patron page']),
    'patron-page-save-button' => t('Save', [], ['context' => 'Patron page']),
    'patron-page-status-section-body' => t('There is a number of materials without limitation to amounts of loans per month.', [], ['context' => 'Patron page']),
    'patron-page-status-section-header' => t('DIGITAL LOANS (EREOLEN)', [], ['context' => 'Patron page']),
    'patron-page-status-section-link' => t('Click here, to see titles always eligible to be loaned', [], ['context' => 'Patron page']),
    'patron-page-status-section-loan-header' => t('Loans per month', [], ['context' => 'Patron page']),
    'patron-page-status-section-loans-audio-books' => t('Audiobooks', [], ['context' => 'Patron page']),
    'patron-page-status-section-loans-ebooks' => t('E-books', [], ['context' => 'Patron page']),
    'patron-page-status-section-out-of-aria-label-audio-books' => t('You used @this audiobooks out of you quota of @that audiobooks', [], ['context' => 'Patron page (aria)']),
    'patron-page-status-section-out-of-aria-label-ebooks' => t('You used @this ebooks out of you quota of @that ebooks', [], ['context' => 'Patron page (aria)']),
    'patron-page-status-section-out-of' => t('@this out of @that', [], ['context' => 'Patron page']),
    'patron-page-status-section-reservations' => t('You can reserve @countEbooks ebooks and @countAudiobooks audiobooks', [], ['context' => 'Patron page']),
    'patron-page-fee' => t('patron page text fee text', [], ['context' => 'Patron page']),
    'patron-pin-saved-success' => t('Your pincode was saved', [], ['context' => 'Patron page']),
    'patron-page-phone-input-message' => t('The phone number must be 6 to 15 characters in length and should be comprised solely of numbers or begin with a +', [], ['context' => 'Patron page']),
    'patron-page-handle-response-information' => t('Your changes are saved.', [], ['context' => 'Patron page']),
    'patron-page-loading' => t('Loading...', [], ['context' => 'Patron page']),

    // Patron registration.
    'create-patron-cancel-button' => t("Cancel", [], ['context' => 'Create patron']),
    'create-patron-change-pickup-body' => t("Select pickup location in the select", [], ['context' => 'Create patron']),
    'create-patron-change-pickup-header' => t("Select pickup location", [], ['context' => 'Create patron']),
    'create-patron-confirm-button' => t("Confirm", [], ['context' => 'Create patron']),
    'create-patron-header' => t("Register as patron", [], ['context' => 'Create patron']),
    'create-patron-invalid-ssn-body' => t("This SSN is invalid", [], ['context' => 'Create patron']),
    'create-patron-invalid-ssn-header' => t("Invalid SSN", [], ['context' => 'Create patron']),
    'patron-contact-name-label' => t("Name", [], ['context' => 'Create patron']),

    // Recommender.
    'empty-recommender-search-config' => $recommenderSettings->get('search_text') ?? DplRecommenderSettings::SEARCH_TEXT,
    'recommender-title-inspiration' => t("For your inspiration", [], ['context' => 'Recommender']),
    'recommender-title-loans' => t("Because you have borrowed @title you may also like", [], ['context' => 'Recommender']),
    'recommender-title-reservations' => t("Because you have reserved @title you may also like", [], ['context' => 'Recommender']),

    // Reservation list.
    'modal-reservation-form-no-interest-after-label' => t("Change the amount of time after which you're no longer interested in this material.", [], ['context' => 'Reservation list']),
    'modal-reservation-form-pickup-label' => t("Change pickup location for your reservation.", [], ['context' => 'Reservation list']),
    'reservation-details-cancel' => t('Cancel', [], ['context' => 'Reservation list']),
    'reservation-details-digital-material-expires-title' => t('Borrow before', [], ['context' => 'Reservation list']),
    'reservation-details-expires' => t('Your reservation expires @date!', [], ['context' => 'Reservation list']),
    'reservation-details-expires-title' => t('Pickup deadline', [], ['context' => 'Reservation list']),
    'reservation-details-save' => t('Save', [], ['context' => 'Reservation list']),
    'reservation-list-all-empty' => t('At the moment you have 0 reservations', [], ['context' => 'Reservation list']),
    'reservation-list-available-in' => t('Available in @count days', [], ['context' => 'Reservation list']),
    'reservation-list-day' => t('day', [], ['context' => 'Reservation list']),
    'reservation-list-days' => t('days', [], ['context' => 'Reservation list']),
    'reservation-list-digital-pickup' => t('Online access', [], ['context' => 'Reservation list']),
    'reservation-list-digital-reservations-empty' => t('At the moment you have 0 reservations on digital items', [], ['context' => 'Reservation list']),
    'reservation-list-digital-reservations-header' => t('Digital reservations', [], ['context' => 'Reservation list']),
    'reservation-list-first-in-queue' => t('You are at the front of the queue', [], ['context' => 'Reservation list']),
    'reservation-list-header' => t('Your reservations', [], ['context' => 'Reservation list']),
    'reservation-list-in-queue' => t('queued', [], ['context' => 'Reservation list']),
    'reservation-list-loan-before' => t('Borrow before @date', [], ['context' => 'Reservation list']),
    'reservation-list-number-in-queue' => t('There are @count people in the queue before you', [], ['context' => 'Reservation list']),
    'reservation-list-on-hold-aria' => t('Reservations have been paused in the following time span:', [], ['context' => 'Reservation list (Aria)']),
    'reservation-list-pause-reservation-aria-modal' => t('This button opens a modal that covers the entire page and contains the possibility to pause physical reservations', [], ['context' => 'Reservation list (Aria)']),
    'reservation-list-pause-reservation' => t('Pause reservations on physical items', [], ['context' => 'Reservation list']),
    'reservation-list-physical-reservations-empty' => t('At the moment you have 0 physical reservations', [], ['context' => 'Reservation list']),
    'reservation-list-physical-reservations-header' => t('Physical reservations', [], ['context' => 'Reservation list']),
    'reservation-list-ready-for-pickup-empty' => t('At the moment you have 0 reservations ready for pickup', [], ['context' => 'Reservation list']),
    'reservation-list-ready-for-pickup-title' => t('Ready for pickup', [], ['context' => 'Reservation list']),
    'reservation-list-ready' => t('Ready', [], ['context' => 'Reservation list']),
    'reservation-list-status-icon-ready-for-pickup-aria-label' => t('This material is ready for pickup', [], ['context' => 'Reservation list (Aria)']),
    'reservation-list-pause-reservation-on-hold' => t('Your reservations are paused', [], ['context' => 'Reservation list']),
    'reservation-list-pause-reservation-button' => t('Settings', [], ['context' => 'Reservation list']),
    'reservation-list-status-icon-queued-aria-label' => json_encode([
      'type' => 'plural',
      'text' => [
        t('You are the only person queued for this material', [], ['context' => 'Reservation list (Aria)']),
        t('This material has @count people in queue before you', [], ['context' => 'Reservation list (Aria)']),
      ],
    ]),
    'reservation-list-status-icon-ready-in-aria-label' => json_encode([
      'type' => 'plural',
      'text' => [
        t('This material is ready in 1 day', [], ['context' => 'Reservation list (Aria)']),
        t('This material is ready in @count days', [], ['context' => 'Reservation list (Aria)']),
      ],
    ]),
    'reservation-pick-up-latest' => t('Pick up before @date', [], ['context' => 'Reservation list']),
    'reservation-status-button' => t('Close', [], ['context' => 'Reservation list']),
    'reservation-success-sub-title' => t('Click the button below to close this window', [], ['context' => 'Reservation list']),
    'reservation-success-title' => t('Your reservation has been changed', [], ['context' => 'Reservation list']),

    // Search.
    'add-more-filters' => t('+ more filters', [], ['context' => 'Search Result']),
    'clear-all' => t('Clear all', [], ['context' => 'Search Result']),
    'facet-access-types' => t('Access types', [], ['context' => 'Search Result']),
    'facet-browser-modal-close-modal-aria-label' => t('Close facet browser modal', [], ['context' => 'Search Result']),
    'facet-browser-modal-screen-reader-modal-description' => t('Modal for facet browser', [], ['context' => 'Search Result']),
    'facet-children-or-adults' => t('Children or adults', [], ['context' => 'Search Result']),
    'facet-creators' => t('Creators', [], ['context' => 'Search Result']),
    'facet-fiction-nonfiction' => t('Fiction or non-fiction', [], ['context' => 'Search Result']),
    'facet-fictional-characters' => t('Fictional characters', [], ['context' => 'Search Result']),
    'facet-genre-and-form' => t('Genre and form', [], ['context' => 'Search Result']),
    'facet-main-languages' => t('Main languages', [], ['context' => 'Search Result']),
    'facet-material-types' => t('Material types', [], ['context' => 'Search Result']),
    'facet-subjects' => t('Subjects', [], ['context' => 'Search Result']),
    'facet-work-types' => t('Work types', [], ['context' => 'Search Result']),
    'filter-list' => t('Filter list', [], ['context' => 'Search Result']),
    'results' => t('results', [], ['context' => 'Search Result']),
    'show-results' => t('Show results', [], ['context' => 'Search Result']),
    'showing-results-for' => t('Showing results for "@query"', [], ['context' => 'Search Result']),
    'showing' => t('Showing', [], ['context' => 'Search Result']),

    // Something similar.
    'something-similar-by-the-same-author' => t("By the same author", [], ['context' => 'Something similar']),
    'something-similar-something-similar-author' => t("Something similar", [], ['context' => 'Something similar']),
    'something-similar-title' => t("Other materials", [], ['context' => 'Something similar']),

    // Work.
    'already-reserved' => t('Already reserved', [], ['context' => 'Work Page']),
    'approve-reservation' => t('Approve reservation', [], ['context' => 'Work Page']),
    'audience' => t('Audience', [], ['context' => 'Work Page']),
    'blocked-button' => t('Blocked', [], ['context' => 'Work Page']),
    'cannot-see-review' => t('The review is not accessible', [], ['context' => 'Work Page']),
    'cant-reserve' => t("Can't be reserved", [], ['context' => 'Work Page']),
    'cant-view-review' => t('Cannot view review', [], ['context' => 'Work Page']),
    'cant-view' => t("Can't be viewed", [], ['context' => 'Work Page']),
    'change-email' => t('Change email', [], ['context' => 'Work Page']),
    'change-sms-number' => t('Change SMS number', [], ['context' => 'Work Page']),
    'close-modal-aria-label-interest-period' => t('Close interest period modal', [], ['context' => 'Work Page']),
    'close-modal-aria-label-pickup-tex' => t('Close pickup location modal', [], ['context' => 'Work Page']),
    'close' => t('Close', [], ['context' => 'Work Page']),
    'contributors' => t('Contributors', [], ['context' => 'Work Page']),
    'copies-there-is' => t('copies there is', [], ['context' => 'Work Page']),
    'creators-are-missing' => t('Creators are missing', [], ['context' => 'Work Page']),
    'days' => t('Days', [], ['context' => 'Work Page']),
    'description-headline' => t('Description', [], ['context' => 'Work Page']),
    'details-list-audience' => t('Audience', [], ['context' => 'Work Page']),
    'details-list-authors' => t('Authors', [], ['context' => 'Work Page']),
    'details-list-contributors' => t('Contributors', [], ['context' => 'Work Page']),
    'details-list-edition' => t('Edition', [], ['context' => 'Work Page']),
    'details-list-first-edition-year' => t('Edition year', [], ['context' => 'Work Page']),
    'details-list-first-edition-year-unknown' => t('Unknown', [], ['context' => 'Work Page']),
    'details-list-genre-and-form' => t('Genre and form', [], ['context' => 'Work Page']),
    'details-list-isbn' => t('Isbn', [], ['context' => 'Work Page']),
    'details-list-language' => t('Language', [], ['context' => 'Work Page']),
    'details-list-original-title' => t('Original title', [], ['context' => 'Work Page']),
    'details-list-play-time' => t('Play time', [], ['context' => 'Work Page']),
    'details-list-publisher' => t('Publisher', [], ['context' => 'Work Page']),
    'details-list-scope' => t('Scope', [], ['context' => 'Work Page']),
    'details-list-type' => t('Type', [], ['context' => 'Work Page']),
    'details-of-the-material' => t('Details of the material', [], ['context' => 'Work Page']),
    'details' => t('Details', [], ['context' => 'Work Page']),
    'edition' => t('Edition', [], ['context' => 'Work Page']),
    'editions' => t('Editions', [], ['context' => 'Work Page']),
    'fiction-nonfiction' => t('Fiction/nonfiction', [], ['context' => 'Work Page']),
    'film-adaptations' => t('Film adaptations', [], ['context' => 'Work Page']),
    'find-on-bookshelf' => t('Find on bookshelf', [], ['context' => 'Work Page']),
    'find-on-shelf-expand-button-explanation' => t('Find on shelf expand button explanation', [], ['context' => 'Work Page']),
    'find-on-shelf-modal-close-modal-aria-label' => t('Close reservation modal', [], ['context' => 'Work Page']),
    'find-on-shelf-modal-list-find-on-shelf' => t('Find it on shelf', [], ['context' => 'Work Page']),
    'find-on-shelf-modal-list-item-count' => t('Home', [], ['context' => 'Work Page']),
    'find-on-shelf-modal-list-material' => t('Material', [], ['context' => 'Work Page']),
    'find-on-shelf-modal-no-location-specified' => t('No location for find on shelf specified', [], ['context' => 'Work Page']),
    'find-on-shelf-modal-periodical-edition-dropdown' => t('Find on shelf modal periodical dropdown - choose edition/volume', [], ['context' => 'Work Page']),
    'find-on-shelf-modal-periodical-year-dropdown' => t('Choose periodical year', [], ['context' => 'Work Page']),
    'find-on-shelf-modal-screen-reader-modal-description' => t('Reservation modal screen reader description', [], ['context' => 'Work Page']),
    'first-available-edition' => t('First available edition', [], ['context' => 'Work Page']),
    'genre-and-form' => t('Genre', [], ['context' => 'Work Page']),
    'get-online' => t('Get online', [], ['context' => 'Work Page']),
    'go-to' => t('Go to @source', [], ['context' => 'Work Page']),
    'have-no-interest-after' => t('Have no interest after', [], ['context' => 'Work Page']),
    'hearts-icon' => t('hearts', [], ['context' => 'Work Page']),
    'identifier' => t('Identifiers', [], ['context' => 'Work Page']),
    'in-same-series' => t('In the same series', [], ['context' => 'Work Page']),
    'infomedia-modal-close-modal-aria-label' => t('Close infomedia modal', [], ['context' => 'Work Page']),
    'infomedia-modal-screen-reader-modal-description' => t('Infomedia modal screen reader description', [], ['context' => 'Work Page']),
    'instant-loan-sub-title' => t('Avoid the queue and pick up the material now', [], ['context' => 'Work Page']),
    'instant-loan-title' => t('Instant loan', [], ['context' => 'Work Page']),
    'instant-loan-underline-description' => t('The material is available at these nearby libraries', [], ['context' => 'Work Page']),
    'interest-period-one-month-config' => t('1', [], ['context' => 'Work Page']),
    'interest-period-one-year-config' => t('1', [], ['context' => 'Work Page']),
    'interest-period-six-months-config' => t('1', [], ['context' => 'Work Page']),
    'interest-period-three-months-config' => t('1', [], ['context' => 'Work Page']),
    'interest-period-two-months-config' => t('1', [], ['context' => 'Work Page']),
    'isbn' => t('ISBN', [], ['context' => 'Work Page']),
    'language' => t('Language', [], ['context' => 'Work Page']),
    'libraries-have-the-material' => t('Libraries have the material', [], ['context' => 'Work Page']),
    'listen-online' => t('Listen online', [], ['context' => 'Work Page']),
    'login-to-see-review' => t('Log in to read the review', [], ['context' => 'Work Page']),
    'material-header-all-editions' => t('All editions', [], ['context' => 'Work Page']),
    'material-header-author-by' => t('By', [], ['context' => 'Work Page']),
    'material-is-available-in-another-edition' => t('Skip the queue - The material is available in another edition - @title @authorAndYear - reservations: @reservations', [], ['context' => 'Work Page']),
    'material-is-included' => t('Material is included', [], ['context' => 'Work Page']),
    'material-is-loaned-out' => t('Material is loaned out', [], ['context' => 'Work Page']),
    'material-reservation-info' => json_encode([
      'type' => 'plural',
      'text' => [
        t('1 copy has been reserved', [], ['context' => 'Work Page']),
        t('@count copies have been reserved', [], ['context' => 'Work Page']),
      ],
    ]),
    'materials-in-stock-info' => json_encode([
      'type' => 'plural',
      'text' => [
        t('We have 1 copy of the material in stock', [], ['context' => 'Work Page']),
        t('We have @count copies of the material in stock', [], ['context' => 'Work Page']),
      ],
    ]),
    'missing-data' => t('Missing data', [], ['context' => 'Work Page']),
    'modal-reservation-form-email-header-description' => t('If you want to receive notifications by e-mail, you can enter or change the desired e-mail here.', [], ['context' => 'Work Page']),
    'modal-reservation-form-email-header-title' => t('Change email', [], ['context' => 'Work Page']),
    'modal-reservation-form-email-input-field-description' => t('Type in email', [], ['context' => 'Work Page']),
    'modal-reservation-form-email-input-field-label' => t('Email', [], ['context' => 'Work Page']),
    'modal-reservation-form-sms-header-description' => t('If you want to receive SMS, you can enter or change your phone number here.', [], ['context' => 'Work Page']),
    'modal-reservation-form-sms-header-title' => t('Change phone number', [], ['context' => 'Work Page']),
    'modal-reservation-form-sms-input-field-description' => t('Input phone number', [], ['context' => 'Work Page']),
    'modal-reservation-form-sms-input-field-label' => t('Phone', [], ['context' => 'Work Page']),
    'not-living-in-municipality' => t("You don't live in the municipality where this library is located.", [], ['context' => 'Work Page']),
    'number-in-queue' => t('You are number @number in the queue', [], ['context' => 'Work Page']),
    'ok-button' => t('Ok', [], ['context' => 'Work Page']),
    'online-limit-month-audiobook-info' => t('You have borrowed @count out of @limit possible audio-books this month', [], ['context' => 'Work Page']),
    'online-limit-month-ebook-info' => t('You have borrowed @count out of @limit possible e-books this month', [], ['context' => 'Work Page']),
    'online-limit-month-info' => t('You have borrowed @count out of @limit possible e-books this month', [], ['context' => 'Work Page']),
    'order-digital-copy-button-loading' => t('Order digital copy button loading text', [], ['context' => 'Work Page']),
    'order-digital-copy-button' => t('Order digital copy', [], ['context' => 'Work Page']),
    'order-digital-copy-description' => t('Order digital copy description text', [], ['context' => 'Work Page']),
    'order-digital-copy-email-label' => t('Email', [], ['context' => 'Work Page']),
    'order-digital-copy-error-button' => t('Close', [], ['context' => 'Work Page']),
    'order-digital-copy-error-description' => t('An error occurred while ordering the digital copy. Please try again later.', [], ['context' => 'Work Page']),
    'order-digital-copy-error-title' => t('Error ordering digital copy', [], ['context' => 'Work Page']),
    'order-digital-copy-feedback-button' => t('Close', [], ['context' => 'Work Page']),
    'order-digital-copy-feedback-ok' => t('The digital copy has been ordered. You will receive an email when the digital copy is ready.', [], ['context' => 'Work Page']),
    'order-digital-copy-feedback-title' => t('Digital copy receipt', [], ['context' => 'Work Page']),
    'order-digital-copy-modal-close-modal-aria-label' => t('Close Order digital copy modal', [], ['context' => 'Work Page']),
    'order-digital-copy-modal-screen-reader-modal-description' => t('Modal for Order digital copy', [], ['context' => 'Work Page']),
    'order-digital-copy-success-button' => t('Close', [], ['context' => 'Work Page']),
    'order-digital-copy-success-description' => t('The digital copy has been ordered. You will receive an email when the digital copy is ready.', [], ['context' => 'Work Page']),
    'order-digital-copy-success-title' => t('Digital copy ordered', [], ['context' => 'Work Page']),
    'order-digital-copy-title' => t('Order digital copy', [], ['context' => 'Work Page']),
    'original-title' => t('Original title', [], ['context' => 'Work Page']),
    'periodical-select-edition' => t('Edition', [], ['context' => 'Work Page']),
    'periodical-select-year' => t('Year', [], ['context' => 'Work Page']),
    'periodikum-select-week' => t('Week', [], ['context' => 'Work Page']),
    'periodikum-select-year' => t('Year', [], ['context' => 'Work Page']),
    'pickup-location' => t('Pick up at', [], ['context' => 'Work Page']),
    'possible' => t('possible', [], ['context' => 'Work Page']),
    'publisher' => t('Publisher', [], ['context' => 'Work Page']),
    'queue' => t('in queue', [], ['context' => 'Work Page']),
    'rating-is' => t('Rating of this item is', [], ['context' => 'Work Page']),
    'rating' => t('out of', [], ['context' => 'Work Page']),
    'read-article' => t('Read article', [], ['context' => 'Work Page']),
    'receive-email-when-material-ready' => t('Receive mail when the material is ready', [], ['context' => 'Work Page']),
    'receive-sms-when-material-ready' => t('Receive SMS when the material is ready', [], ['context' => 'Work Page']),
    'reservable-from-another-library' => t('Reservable on another library', [], ['context' => 'Work Page']),
    'reservation-errors-description' => t('Year', [], ['context' => 'Work Page']),
    'reservation-errors-title' => t('Reservation error', [], ['context' => 'Work Page']),
    'reservation-modal-close-modal-aria-label' => t('Close reservation modal', [], ['context' => 'Work Page']),
    'reservation-modal-screen-reader-modal-description' => t('modal for reservation', [], ['context' => 'Work Page']),
    'reservation-succes-is-reserved-for-you' => t('is reserved for you', [], ['context' => 'Work Page']),
    'reservation-succes-title' => t('The material is available and is now reserved for you!', [], ['context' => 'Work Page']),
    'reservation-success-preferred-pickup-branch' => t('Material is available and you will get a message when it is ready for pickup - pickup at @branch', [], ['context' => 'Work Page']),
    'reservations-for-this-material' => t('reservations for this material', [], ['context' => 'Work Page']),
    'reserve-book' => t('Reserve book', [], ['context' => 'Work Page']),
    'reserve' => t('Reserve', [], ['context' => 'Work Page']),
    'reviews' => t('Reviews', [], ['context' => 'Work Page']),
    'scope' => t('Scope', [], ['context' => 'Work Page']),
    'screen-reader-modal-description-interest-period' => t('Change interest period modal', [], ['context' => 'Work Page']),
    'screen-reader-modal-description-pickup' => t('Change pickup location modal', [], ['context' => 'Work Page']),
    'see-online' => t('See online', [], ['context' => 'Work Page']),
    'this-month' => t('This month', [], ['context' => 'Work Page']),
    'try-agin-button' => t('Try again', [], ['context' => 'Work Page']),
    'type' => t('Type', [], ['context' => 'Work Page']),
    'we-have-shopped' => t('In stock:', [], ['context' => 'Work Page']),
    'you-have-borrowed' => t('You have borrowed', [], ['context' => 'Work Page']),

    // Shared across multiple apps.
    'accept-modal-accept-button' => t("Yes, renew", [], ['context' => 'Global']),
    'accept-modal-are-you-sure' => t("Are you sure you want to renew?", [], ['context' => 'Global']),
    'accept-modal-aria-description' => t("accept modal aria description text", [], ['context' => 'Global']),
    'accept-modal-aria-label' => t("accept modal aria label text", [], ['context' => 'Global']),
    'accept-modal-body' => t("If you renew your fee will be raised", [], ['context' => 'Global']),
    'accept-modal-cancel-button' => t("Cancel renewal", [], ['context' => 'Global']),
    'accept-modal-header' => t("Your fee is raised", [], ['context' => 'Global']),
    'add-to-favorites-aria-label' => t('add @title to favorites list', [], ['context' => 'Global']),
    'alert-error-close' => t('Close', [], ['context' => 'React apps (Global error handling)']),
    'alert-error-message' => t('An error occurred', [], ['context' => 'React apps (Global error handling)']),
    'autosuggest-animated-series-category' => t('Animated series', [], ['context' => 'Global']),
    'autosuggest-audio-book-category' => t('Audio books', [], ['context' => 'Global']),
    'autosuggest-book-category' => t('Books', [], ['context' => 'Global']),
    'autosuggest-ebook-category' => t('E-books', [], ['context' => 'Global']),
    'autosuggest-film-category' => t('Movies', [], ['context' => 'Global']),
    'autosuggest-game-category' => t('Games', [], ['context' => 'Global']),
    'autosuggest-music-category' => t('Music', [], ['context' => 'Global']),
    'availability-available' => t('Available', [], ['context' => 'Global']),
    'availability-unavailable' => t('Unavailable', [], ['context' => 'Global']),
    'by-author' => t('by', [], ['context' => 'Global']),
    'change-interest-period' => t('Change interest period', [], ['context' => 'Global']),
    'change-pickup-location' => t('Change pickup location', [], ['context' => 'Global']),
    'choose-one' => t('Choose one', [], ['context' => 'Global']),
    'dashboard-number-in-line' => t('Number @count in line', [], ['context' => 'Global']),
    'date-inputs-end-date-label' => t('To', [], ['context' => 'Global']),
    'date-inputs-start-date-label' => t('From', [], ['context' => 'Global']),
    'delete-reservation-modal-aria-description' => t('This button opens a modal that covers the entire page and contains the possibility to delete a selected reservation, or multiple selected reservations', [], ['context' => 'Global']),
    'delete-reservation-modal-close-modal' => t('Close delete reservation modal', [], ['context' => 'Global']),
    'delete-reservation-modal-delete-button' => t('Cancel reservation', [], ['context' => 'Global']),
    'delete-reservation-modal-delete-question' => t('Do you want to cancel your reservation?', [], ['context' => 'Global']),
    'delete-reservation-modal-header' => json_encode([
      'type' => 'plural',
      'text' => [
        t('Cancel reservation', [], ['context' => 'Global']),
        t('Cancel reservations', [], ['context' => 'Global']),
      ],
    ]),
    'delete-reservation-modal-not-regrettable' => t('You cannot regret this action', [], ['context' => 'Global']),
    'digital-reservations-header' => t('Digital reservations', [], ['context' => 'Global']),
    'et-al' => t('et al.', [], ['context' => 'Global']),
    'group-modal-button' => t('Renewable (@count)', [], ['context' => 'Global']),
    'group-modal-checkbox' => t('Choose all', [], ['context' => 'Global']),
    'group-modal-due-date-aria-description' => t('This modal groups loans after due date and makes it possible to renew said loans', [], ['context' => 'Global']),
    'group-modal-due-date-header' => t('Due date @date', [], ['context' => 'Global']),
    'group-modal-due-date-link-to-page-with-fees' => t("Read more about fees", [], ['context' => 'Global']),
    'group-modal-due-date-material' => t("Due date @date", [], ['context' => 'Global']),
    'group-modal-due-date-renew-loan-close-modal-aria-label' => t('Close renew loans modal', [], ['context' => 'Global']),
    'group-modal-due-date-warning-loan-overdue' => t('The due date of return is exceeded, therefore you will be charged a fee, when the item is returned', [], ['context' => 'Global']),
    'group-modal-go-to-material' => t("Go to material details", [], ['context' => 'Global']),
    'group-modal-hidden-label-checkbox-on-material' => t('Select @label for renewal', [], ['context' => 'Global']),
    'group-modal-loans-aria-description' => t("This modal makes it possible to renew materials", [], ['context' => 'Global']),
    'group-modal-loans-close-modal-aria-label' => t("Close modal with grouped loans", [], ['context' => 'Global']),
    'group-modal-renew-loan-denied-inter-library-loan' => t("The item has been lent to you by another library and renewal is therefore conditional of the acceptance by that library", [], ['context' => 'Global']),
    'group-modal-renew-loan-denied-max-renewals-reached' => t("The item cannot be renewed further", [], ['context' => 'Global']),
    'group-modal-renew-loan-denied-reserved' => t("The item is reserved by another patron", [], ['context' => 'Global']),
    'group-modal-return-library' => t("Can be returned to all branches of the municipalities libraries", [], ['context' => 'Global']),
    'group-modal-reservations-close-modal-aria-label' => t('Close modal with grouped reservations', [], ['context' => 'Global']),
    'group-modal-reservations-loans-aria-description' => t('This modal makes it possible to delete reservations', [], ['context' => 'Global']),
    'header-dropdown-item-advanced-search' => t('Advanced search', [], ['context' => 'Global']),
    'in-series' => t('in series', [], ['context' => 'Global']),
    'in' => t('in', [], ['context' => 'Global']),
    'input-placeholder' => t('Start typing in order to search', [], ['context' => 'Global']),
    'loading' => t('loading', [], ['context' => 'Global']),
    'loans-overdue' => t('Returned too late', [], ['context' => 'Global']),
    'loans-soon-overdue' => t('To be returned soon', [], ['context' => 'Global']),
    'material-and-author' => t('and', [], ['context' => 'Global']),
    'material-by-author' => t("By", [], ['context' => 'Global']),
    'material-details-close-modal-aria-label' => t('Close material details modal', [], ['context' => 'Global']),
    'material-details-digital-due-date-label' => t("Expires", [], ['context' => 'Global']),
    'material-details-go-to-ereolen' => t("Go to eReolen", [], ['context' => 'Global']),
    'material-details-link-to-page-with-fees' => t('Read more about fees', [], ['context' => 'Global']),
    'material-details-loan-date-label' => t('Loan date', [], ['context' => 'Global']),
    'material-details-material-number-label' => t('Material Item Number', [], ['context' => 'Global']),
    'material-details-modal-aria-description' => t('This modal shows material details, and makes it possible to renew a material, of that material is renewable', [], ['context' => 'Global']),
    'material-details-overdue' => t('Expired', [], ['context' => 'Global']),
    'material-details-physical-due-date-label' => t('Afleveres', [], ['context' => 'Global']),
    'material-details-renew-loan-button' => t("Renew your loans", [], ['context' => 'Global']),
    'material-details-warning-loan-overdue' => t('The due date of return is exceeded, therefore you will be charged a fee, when the item is returned', [], ['context' => 'Global']),
    'modal-reservation-form-no-interest-after-header-description' => t('Set date for when your interest for the material will expire.', [], ['context' => 'Global']),
    'modal-reservation-form-no-interest-after-header-title' => t('Change interest deadline', [], ['context' => 'Global']),
    'modal-reservation-form-pickup-header-title' => t('Choose pickup library', [], ['context' => 'Global']),
    'modal-reservation-form-pickup-header-description' => t('Decide at which library you want to pickup the material.', [], ['context' => 'Global']),
    'no-search-result' => t('Your search has 0 results', [], ['context' => 'Global']),
    'number-description' => t('nr.', [], ['context' => 'Global']),
    'one-month' => t('1 month', [], ['context' => 'Global']),
    'one-year' => t('1 year', [], ['context' => 'Global']),
    'out-of' => t('out of', [], ['context' => 'Global']),
    'patron-contact-email-checkbox' => t('Receive emails about your loans, reservations, and so forth', [], ['context' => 'Global']),
    'patron-contact-email-label' => t('E-mail', [], ['context' => 'Global']),
    'patron-contact-info-body' => t('patron page contact info body text', [], ['context' => 'Global']),
    'patron-contact-info-header' => t('CONTACT INFORMATION', [], ['context' => 'Global']),
    'patron-contact-phone-checkbox' => t('Receive text messages about your loans, reservations, and so forth', [], ['context' => 'Global']),
    'patron-contact-phone-label' => t('Phone number', [], ['context' => 'Global']),
    'patron-page-change-pincode-body' => t('Change current pin by entering a new pin and saving', [], ['context' => 'Global']),
    'patron-page-change-pincode-header' => t('PINCODE', [], ['context' => 'Global']),
    'patron-page-confirm-pincode-label' => t('Confirm new pin', [], ['context' => 'Global']),
    'pause-reservation-modal-aria-description' => t('This modal makes it possible to pause your physical reservations', [], ['context' => 'Global']),
    'pause-reservation-modal-below-inputs' => t('Pause reservation below inputs text', [], ['context' => 'Global']),
    'pause-reservation-modal-body' => t('Pause your reservations early, since reservations that are already being processed, will not be paused.', [], ['context' => 'Global']),
    'pause-reservation-modal-close-modal' => t('Close pause reservations modal', [], ['context' => 'Global']),
    'pause-reservation-modal-header' => t('Pause reservations on physical items', [], ['context' => 'Global']),
    'pause-reservation-modal-link' => t('Read more', [], ['context' => 'Global']),
    'pause-reservation-modal-save-button-label' => t('Save', [], ['context' => 'Global']),
    'physical-reservations-header' => t('Physical reservations', [], ['context' => 'Global']),
    'pick-up-latest' => t('Pick up before @date', [], ['context' => 'Global']),
    'pickup-branches-dropdown-label' => t('Choose pickup branch', [], ['context' => 'Global']),
    'pickup-branches-dropdown-nothing-selected' => t('Nothing selected', [], ['context' => 'Global']),
    'patron-page-pincode-label' => t('New pin', [], ['context' => 'Global']),
    'patron-page-pincode-too-short-validation' => t('The pincode should be minimum @pincodeLengthMin and maximum @pincodeLengthMax characters long', [], ['context' => 'Global']),
    'patron-page-pincodes-not-the-same' => t('The pincodes are not the same', [], ['context' => 'Global']),
    'publizon-audio-book' => t('Audiobook', [], ['context' => 'Global']),
    'publizon-ebook' => t('E-book', [], ['context' => 'Global']),
    'publizon-podcast' => t('Podcast', [], ['context' => 'Global']),
    'ready-for-loan-counter-label' => t('Ready', [], ['context' => 'Global']),
    'ready-for-loan' => t('Ready for pickup', [], ['context' => 'Global']),
    'remove-all-reservations' => t('Remove reservations (@amount)', [], ['context' => 'Global']),
    'remove-from-favorites-aria-label' => t('remove @title from favorites list', [], ['context' => 'Global']),
    'renew-button' => t('Renew', [], ['context' => 'Renew loan']),
    'renew-cannot-be-renewed' => t('Cannot be renewed', [], ['context' => 'Renew loan']),
    'renew-group-modal-loans-button' => t('Ok', [], ['context' => 'Global']),
    'renew-group-modal-loans-error-status' => t('Something went wrong renewing your loans. Please try again.', [], ['context' => 'Global']),
    'renew-group-modal-loans-error-title' => t('Renewing your loans failed', [], ['context' => 'Global']),
    'renew-group-modal-loans-no-renewals-possible-error-status' => t('For some reason, no one of your loans could be renewed.', [], ['context' => 'Global']),
    'renew-group-modal-loans-no-renewals-possible-error-title' => t('No loans could be renewed', [], ['context' => 'Global']),
    'renew-group-modal-loans-success-status' => t('{"type":"plural","text":["1 loan has been renewed.","@count loans have been renewed."]}', [], ['context' => 'Global']),
    'renew-group-modal-loans-success-title' => t('You have renewed your loans', [], ['context' => 'Global']),
    'renew-material-loan-button' => t('Ok', [], ['context' => 'Global']),
    'renew-material-loan-error-status' => t('omething went wrong renewing your loan. Please try again.', [], ['context' => 'Global']),
    'renew-material-loan-error-title' => t('Renewal of your loan failed', [], ['context' => 'Global']),
    'renew-material-loan-no-renewals-possible-error-status' => t('For some reason, your loan could not be renewed.', [], ['context' => 'Global']),
    'renew-material-loan-no-renewals-possible-error-title' => t('The loan could not be renewed', [], ['context' => 'Global']),
    'renew-material-loan-success-status' => t('1 loan was renewed.', [], ['context' => 'Global']),
    'renew-material-loan-success-title' => t('You have renewed your loan', [], ['context' => 'Global']),
    'renew-processing' => t('Processing...', [], ['context' => 'Renew loan']),
    'reservation-details-borrow-before' => t('Borrow before @date', [], ['context' => 'Global']),
    'reservation-details-button-remove' => t('Remove your reservation', [], ['context' => 'Global']),
    'reservation-details-change' => t('Apply changes', [], ['context' => 'Global']),
    'reservation-details-date-of-reservation-title' => t('Date of reservation', [], ['context' => 'Global']),
    'reservation-details-digital-reservation-go-to-ereolen' => t('Go to eReolen', [], ['context' => 'Global']),
    'reservation-details-no-interest-after-title' => t('Not interested after', [], ['context' => 'Global']),
    'reservation-details-number-in-queue-label' => t('@count queued', [], ['context' => 'Global']),
    'reservation-details-others-in-queue' => t('Others are queueing for this material', [], ['context' => 'Global']),
    'reservation-details-pick-up-at-title' => t('Pickup branch', [], ['context' => 'Global']),
    'reservation-details-pickup-deadline-title' => t('Pickup deadline', [], ['context' => 'Global']),
    'reservation-details-ready-for-loan' => t('Ready for pickup', [], ['context' => 'Global']),
    'reservation-details-remove-digital-reservation' => t('Remove your reservation', [], ['context' => 'Global']),
    'reservation-details-status-title' => t('Status', [], ['context' => 'Global']),
    'reservations-ready' => t('Ready for you', [], ['context' => 'Global']),
    'result-pager-status' => t('Showing @itemsShown out of @hitcount items', [], ['context' => 'Global']),
    'search-header-dropdown' => t('Dropdown with additional search functions', [], ['context' => 'Global']),
    'save-button' => t('Save', [], ['context' => 'Global']),
    'search-header-icon-alt' => t('Search button', [], ['context' => 'Global']),
    'search-header-input-label' => t('Search header input', [], ['context' => 'Global']),
    'search-no-valid-characters-error' => t('Input must contain at least one non-whitespace character.', [], ['context' => 'Global']),
    'shift' => t('Shift', [], ['context' => 'Global']),
    'show-more' => t('show more', [], ['context' => 'Global']),
    'six-months' => t('6 months', [], ['context' => 'Global']),
    'status-badge-warning' => t('Expires soon', [], ['context' => 'Global']),
    'string-suggestion-author' => t('Author', [], ['context' => 'Global']),
    'string-suggestion-topic' => t('Topic', [], ['context' => 'Global']),
    'string-suggestion-work' => t('Work', [], ['context' => 'Global']),
    'subject-number' => t('Subject number', [], ['context' => 'Global']),
    'three-months' => t('3 months', [], ['context' => 'Global']),
    'two-months' => t('2 months', [], ['context' => 'Global']),
  ];
};

/**
 * Implements hook_dpl_react_apps_data().
 */
function dpl_react_apps_dpl_react_apps_data(array &$data): void {
  $adgangsplatformen_config = \Drupal::service('dpl_login.adgangsplatformen.config');
  $general_settings = \Drupal::configFactory()->get('dpl_library_agency.general_settings');
  $allow_remove_ready_reservations = $general_settings->get('reservation_detail_allow_remove_ready_reservations') ?? GeneralSettingsForm::RESERVATION_DETAIL_ALLOW_REMOVE_READY_RESERVATIONS;

  // @todo We should use the adgabngsplatform config everywhere we handle data that it can provide,
  // eg. login/logout urls.
  $data['configs'] += [
    'agency' => json_encode([
      'id' => $adgangsplatformen_config->getAgencyId(),
    ]),
    'reservation-details' => json_encode([
      'allowRemoveReadyReservations' => $allow_remove_ready_reservations,
    ]),
  ];

  $data['texts'] +=  dpl_react_apps_texts();

  $data['urls'] += [
    'dpl-cms-base' => dpl_react_apps_get_dpl_cms_base_url(),
    'search' => dpl_react_apps_ensure_url_is_string(
      Url::fromRoute('dpl_react_apps.search_result')->toString()
    ),
    'advanced-search' => dpl_react_apps_ensure_url_is_string(
      Url::fromRoute('dpl_react_apps.advanced_search')->toString()
    ),
    // React applications support variable replacement where variables are
    // prefixed with :. Specify the variable :workid as a parameter to let the
    // route build the url. Unfortunatly : will be encoded as %3A so we have to
    // decode the url again to make replacement work.
    'material' => urldecode(dpl_react_apps_ensure_url_is_string(
      Url::fromRoute('dpl_react_apps.work')
        ->setRouteParameter('wid', ':workid')
        ->toString()
    )),
    'logout' => dpl_react_apps_ensure_url_is_string(
      Url::fromRoute('dpl_login.logout', [], ['absolute' => TRUE])->toString()
    ),
    'auth' => dpl_react_apps_ensure_url_is_string(
      Url::fromRoute('dpl_login.login')->toString()
    ),
    'dashboard' => dpl_react_apps_ensure_url_is_string(
      Url::fromRoute('dpl_dashboard.list')->toString()
    ),
    'ereolen-homepage' => dpl_react_apps_format_app_url(
      GeneralSettingsForm::EREOLEN_HOMEPAGE_URL
    ),

  ];
}

/**
 * Implements hook_preprocess_HOOK().
 *
 * @param mixed[] $variables
 *   The variables for the theme hook.
 */
function dpl_react_apps_preprocess_dpl_react_app(array &$variables): void {
  // Add data from other modules.
  $data = [
    'urls' => [],
    'texts' => [],
    'configs' => [],
  ];
  \Drupal::moduleHandler()->invokeAll('dpl_react_apps_data', [&$data]);
  foreach ($data as $scope => $values) {
    if (empty($values)) {
      continue;
    }
    foreach ($values as $key => $value) {
      $variables['attributes'] += [
        implode('-', ['data', $key, rtrim($scope, 's')]) => $value,
      ];
    }
  }
}

/**
 * Make sure that generated url is a string.
 *
 * @param string|\Drupal\Core\GeneratedUrl $url
 *   Drupal generated Url object.
 */
function dpl_react_apps_ensure_url_is_string(string|GeneratedUrl $url): string {
  if ($url instanceof GeneratedUrl) {
    $url = $url->getGeneratedUrl();
  }

  return $url;
}

/**
 * Get the base url of the dpl cms.
 *
 * @return string
 *   The base url of the dpl cms.
 */
function dpl_react_apps_get_dpl_cms_base_url(): string {
  return rtrim(dpl_react_apps_ensure_url_is_string(
    Url::fromRoute('<front>', [], ['absolute' => TRUE])->toString()
  ), "/");
}

/**
 * Format urls used by the apps.
 *
 * @param string|null $url
 *   Url to format.
 * @param string $fallbackUrl
 *   If the url param is not present.
 *
 * @return string
 *   Formatted url.
 */
function dpl_react_apps_format_app_url(string|NULL $url, string $fallbackUrl = ''): string {
  if (!empty($url)) {
    return $url;
  }

  // Use the fallback url that is provided and if that is not present use the
  // dpl cms base url which is the absolute url to front page of the site.
  return $fallbackUrl ?: dpl_react_apps_get_dpl_cms_base_url();
}
