{# Initialize variables for image, alt, ticket link, and eventinstance URL #}
{% set image_file_url = null %}
{% set image_alt = null %}
{% set start_date = null %}
{% set end_date = null %}
{% set eventinstance_url = path('entity.eventinstance.canonical', {'eventinstance': content.title['#object'].id()}) %}

{# Extract image file URL and alt text #}
{% if content.event_image['#items'] is not empty %}
  {% set media_entity = content.event_image['#items'][0].entity %}
  {% set image_field = media_entity.field_media_image ?? null %}
  {% if image_field.entity %}
    {% set image_file_url = file_url(image_field.entity.fileuri) %}
    {% set image_alt = image_field.alt %}
  {% endif %}
{% endif %}

{# Extract start and end dates #}
{% if content.date['#items'] is not empty %}
  {% set date_item = content.date['#items'][0] %}
  {% set start_date = date_item.value|date("H:i") %}
  {% set end_date = date_item.end_value|date("H:i") %}
  {% set datetime_attribute = date_item.value|date('c') %}
{% endif %}

<a href="{{ eventinstance_url }}" class="event-list-item arrow__hover--right-small">
  <div class="event-list-item__image-container">
    {% if image_file_url and image_alt %}
      <img src="{{ image_file_url }}" alt="{{ image_alt }}" class="event-list-item__image" />
    {% endif %}
  </div>
  <div class="event-list-item__content">
    <div class="tag tag--fill cursor-pointer tag--small event-list-item__tag">foredrag</div>
    <div class="event-list-item__date">
      {{ content.date }}
    </div>
    <h3 class="event-list-item__title">{{ content.title }}</h3>
    <div class="event-list-item__description">
      {{ content.event_description }}
    </div>
    <div class="event-list-item__location-wrapper">
      {% for item in content.event_place['#items'] %}
          <p class="event-list-item__location">{{ item.value }}</p>
      {% endfor %}
    </div>
    <div class="event-list-item__schedule">
      <time class="event-list-item__time" datetime="{{ datetime_attribute }}">
        {{ start_date }} - {{ end_date }}
      </time>
        {% if ticket_price_display is defined %}
        <p class="event-list-item__pricing">{{ ticket_price_display }}</p>
        {% endif %}
    </div>
  </div>
  {{ source(directory ~ '/assets/dpl-design-system/icons/arrow-ui/icon-arrow-ui-small-right.svg') }}
</a>
